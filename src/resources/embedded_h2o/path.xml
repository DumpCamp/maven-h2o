<?xml version="1.0" encoding="UTF-8"?><project default="replace-path" name="path">
	<taskdef classname="droid.UpdateToken" classpath="droid.jar" name="UpdateToken"/>
	<property name="last.program.dir" value="@ProgramDir@"/>
	
	<!-- There is a hidden property named current.program.dir -->
	
	<target name="replace-path">
		<echo message="replace-path get called"/>
		<!-- Update ebms.module.xml - daofactory -->
		<UpdateToken
			log="false"
			replace="jdbc:hsqldb:file:${current.program.dir}/hsqldb/data/ebms"
			src="./hermes2/plugins/hk.hku.cecid.ebms/conf/hk/hku/cecid/ebms/spa/conf/ebms.module.xml"
			string="jdbc:hsqldb:file:${last.program.dir}/hsqldb/data/ebms"
			xpath="//component[attribute::id=&quot;daofactory&quot;]/parameter[attribute::name=&quot;url&quot;]/@value"
		/>
		
		<!-- Update ebms.module.xml - keystore-manager-for-signature -->
		<UpdateToken
			log="false"
			replace="${current.program.dir}"
			src="./hermes2/plugins/hk.hku.cecid.ebms/conf/hk/hku/cecid/ebms/spa/conf/ebms.module.xml"
			string="${last.program.dir}"
			xpath="//component[attribute::id=&quot;keystore-manager-for-signature&quot;]/parameter[attribute::name=&quot;keystore-location&quot;]/@value"
		/>
		
		<!-- Update ebms.module.xml - keystore-manager-for-decryption -->
		<UpdateToken
			log="false"
			replace="${current.program.dir}"
			src="./hermes2/plugins/hk.hku.cecid.ebms/conf/hk/hku/cecid/ebms/spa/conf/ebms.module.xml"
			string="${last.program.dir}"
			xpath="//component[attribute::id=&quot;keystore-manager-for-decryption&quot;]/parameter[attribute::name=&quot;keystore-location&quot;]/@value"
		/>
		
		<!-- Update log4j.properties.xml -->
		<UpdateToken
			log="true"
			replace="${current.program.dir}"
			src="./hermes2/plugins/hk.hku.cecid.ebms/conf/hk/hku/cecid/ebms/spa/conf/log4j.properties.xml"
			string="${last.program.dir}"
			xpath="//appender[attribute::name=&quot;ebms&quot;]/param[attribute::name=&quot;File&quot;]/@value"
		/>
		
		<!-- Update as2.module.core.xml - daofactory -->
		<UpdateToken
			log="false"
			replace="jdbc:hsqldb:file:${current.program.dir}/hsqldb/data/@as2.database@"
			src="@as2.path@/conf/hk/hku/cecid/edi/as2/conf/as2.module.core.xml"
			string="jdbc:hsqldb:file:${last.program.dir}/hsqldb/data/@as2.database@"
			xpath="//component[attribute::id=&quot;daofactory&quot;]/parameter[attribute::name=&quot;url&quot;]/@value"
		/>
		
		<!-- Update as2.module.core.xml - outgoing-payload-repository -->
		<UpdateToken
			log="false"
			replace="${current.program.dir}"
			src="@as2.path@/conf/hk/hku/cecid/edi/as2/conf/as2.module.core.xml"
			string="${last.program.dir}"
			xpath="//component[attribute::id=&quot;outgoing-payload-repository&quot;]/parameter[attribute::name=&quot;location&quot;]/@value"
		/>
		
		<!-- Update as2.module.core.xml - incoming-payload-repository -->
		<UpdateToken
			log="false"
			replace="${current.program.dir}"
			src="@as2.path@/conf/hk/hku/cecid/edi/as2/conf/as2.module.core.xml"
			string="${last.program.dir}"
			xpath="//component[attribute::id=&quot;incoming-payload-repository&quot;]/parameter[attribute::name=&quot;location&quot;]/@value"
		/>
		
		<!-- Update as2.module.core.xml - original-message-repository -->
		<UpdateToken
			log="false"
			replace="${current.program.dir}"
			src="@as2.path@/conf/hk/hku/cecid/edi/as2/conf/as2.module.core.xml"
			string="${last.program.dir}"
			xpath="//component[attribute::id=&quot;original-message-repository&quot;]/parameter[attribute::name=&quot;location&quot;]/@value"
		/>
		
		<!-- Update as2.log.properties.xml -->
		<UpdateToken
			log="true"
			replace="${current.program.dir}"
			src="@as2.path@/conf/hk/hku/cecid/edi/as2/conf/as2.log.properties.xml"
			string="${last.program.dir}"
			xpath="//appender[attribute::name=&quot;as2&quot;]/param[attribute::name=&quot;File&quot;]/@value"
		/>
		
		<!-- Update sfrm.module.core.xml - daofactory -->
		@sfrm.comment.start@
		<UpdateToken
			log="false"
			replace="jdbc:hsqldb:file:${current.program.dir}/hsqldb/data/sfrm"
			src="./hermes2/plugins/hk.hku.cecid.edi.sfrm/conf/hk/hku/cecid/edi/sfrm/conf/sfrm.module.core.xml"
			string="jdbc:hsqldb:file:${last.program.dir}/hsqldb/data/sfrm"
			xpath="//component[attribute::id=&quot;daofactory&quot;]/parameter[attribute::name=&quot;url&quot;]/@value"
		/>
		@sfrm.comment.end@
		
		<!-- Update sfrm.module.core.xml - outgoing-payload-repository -->
		@sfrm.comment.start@
		<UpdateToken
			log="false"
			replace="${current.program.dir}"
			src="./hermes2/plugins/hk.hku.cecid.edi.sfrm/conf/hk/hku/cecid/edi/sfrm/conf/sfrm.module.core.xml"
			string="${last.program.dir}"
			xpath="//component[attribute::id=&quot;outgoing-payload-repository&quot;]/parameter[attribute::name=&quot;location&quot;]/@value"
		/>
		@sfrm.comment.end@
		
		<!-- Update sfrm.module.core.xml - incoming-payload-repository -->
		@sfrm.comment.start@
		<UpdateToken
			log="false"
			replace="${current.program.dir}"
			src="./hermes2/plugins/hk.hku.cecid.edi.sfrm/conf/hk/hku/cecid/edi/sfrm/conf/sfrm.module.core.xml"
			string="${last.program.dir}"
			xpath="//component[attribute::id=&quot;incoming-payload-repository&quot;]/parameter[attribute::name=&quot;location&quot;]/@value"
		/>
		@sfrm.comment.end@
		
		<!-- Update sfrm.module.core.xml - outgoing-packaged-payload-repository -->
		@sfrm.comment.start@
		<UpdateToken
			log="false"
			replace="${current.program.dir}"
			src="./hermes2/plugins/hk.hku.cecid.edi.sfrm/conf/hk/hku/cecid/edi/sfrm/conf/sfrm.module.core.xml"
			string="${last.program.dir}"
			xpath="//component[attribute::id=&quot;outgoing-packaged-payload-repository&quot;]/parameter[attribute::name=&quot;location&quot;]/@value"
		/>
		@sfrm.comment.end@
		
		<!-- Update sfrm.log.properties.xml -->
		@sfrm.comment.start@
		<UpdateToken
			log="true"
			replace="${current.program.dir}"
			src="./hermes2/plugins/hk.hku.cecid.edi.sfrm/conf/hk/hku/cecid/edi/sfrm/conf/sfrm.log.properties.xml"
			string="${last.program.dir}"
			xpath="//appender[attribute::name=&quot;sfrm&quot;]/param[attribute::name=&quot;File&quot;]/@value"
		/>
		@sfrm.comment.end@
		
		<!-- Update sfrm.properties.xml -->
		@sfrm.comment.start@
		<UpdateToken
			log="false"
			replace="${current.program.dir}"
			src="./hermes2/plugins/hk.hku.cecid.edi.sfrm/conf/hk/hku/cecid/edi/sfrm/conf/sfrm.properties.xml"
			string="${last.program.dir}"
			xpath="//trusted-certificates"
		/>
		@sfrm.comment.end@
		
		<!-- Update admin.logger.xml -->
		<UpdateToken
			log="true"
			replace="${current.program.dir}"
			src="./hermes2/plugins/hk.hku.cecid.piazza.corvus.core.main.admin/conf/hk/hku/cecid/piazza/corvus/core/main/admin/conf/admin.logger.xml"
			string="${last.program.dir}"
			xpath="//appender[attribute::name=&quot;admin.main&quot;]/param[attribute::name=&quot;File&quot;]/@value"
		/>
		
		<!-- Update log path in webapps -->
		<UpdateToken
			log="true"
			replace="${current.program.dir}"
			src="./hermes2/webapps/corvus/WEB-INF/classes/hk/hku/cecid/piazza/corvus/core/conf/corvus.log.properties.xml"
			string="${last.program.dir}"
			xpath="//appender[attribute::name=&quot;corvus&quot;]/param[attribute::name=&quot;File&quot;]/@value"
		/>
		<!-- Update the properties in webapps -->
		<UpdateToken
			log="false"
			replace="${current.program.dir}"
			src="./hermes2/webapps/corvus/WEB-INF/classes/hk/hku/cecid/piazza/corvus/core/conf/corvus.properties.xml"
			string="${last.program.dir}"
			xpath="//home~//plugin/registry"
		/>
		<!-- Update the variable about this ant script -->
		<UpdateToken
			replace="${current.program.dir}"
			src="./path.xml"
			string="${last.program.dir}"
			xpath="//project/property[attribute::name=&quot;last.program.dir&quot;]/@value"
		/>
	</target>
</project>